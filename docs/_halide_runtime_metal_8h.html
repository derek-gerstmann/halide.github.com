<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Halide: HalideRuntimeMetal.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Halide
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_halide_runtime_metal_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">HalideRuntimeMetal.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Routines specific to the <a class="el" href="namespace_halide.html" title="Defines methods for manipulating and analyzing boolean expressions. ">Halide</a> Metal runtime.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="_halide_runtime_8h_source.html">HalideRuntime.h</a>&quot;</code><br/>
</div>
<p><a href="_halide_runtime_metal_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9bbbbcb585e8e3de2c0659cb8f455d82"><td class="memItemLeft" align="right" valign="top">const struct <br class="typebreak"/>
<a class="el" href="structhalide__device__interface.html">halide_device_interface</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_halide_runtime_metal_8h.html#a9bbbbcb585e8e3de2c0659cb8f455d82">halide_metal_device_interface</a> ()</td></tr>
<tr class="separator:a9bbbbcb585e8e3de2c0659cb8f455d82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a443e002b0f4f5e5d74ab1c3b981abf62"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_halide_runtime_metal_8h.html#a443e002b0f4f5e5d74ab1c3b981abf62">halide_metal_wrap_buffer</a> (void *<a class="el" href="printer_8h.html#a9a395374120db0d0280e16f53201d5cf">user_context</a>, struct <a class="el" href="structbuffer__t.html">buffer_t</a> *<a class="el" href="printer_8h.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>, uintptr_t buffer)</td></tr>
<tr class="memdesc:a443e002b0f4f5e5d74ab1c3b981abf62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the underlying MTLBuffer for a <a class="el" href="structbuffer__t.html" title="The raw representation of an image passed around by generated Halide code. ">buffer_t</a>.  <a href="#a443e002b0f4f5e5d74ab1c3b981abf62">More...</a><br/></td></tr>
<tr class="separator:a443e002b0f4f5e5d74ab1c3b981abf62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab47409d4c4166c0b4ce53bbbc10abec"><td class="memItemLeft" align="right" valign="top">uintptr_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_halide_runtime_metal_8h.html#aab47409d4c4166c0b4ce53bbbc10abec">halide_metal_detach_buffer</a> (void *<a class="el" href="printer_8h.html#a9a395374120db0d0280e16f53201d5cf">user_context</a>, struct <a class="el" href="structbuffer__t.html">buffer_t</a> *<a class="el" href="printer_8h.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>)</td></tr>
<tr class="memdesc:aab47409d4c4166c0b4ce53bbbc10abec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disconnect a <a class="el" href="structbuffer__t.html" title="The raw representation of an image passed around by generated Halide code. ">buffer_t</a> from the memory it was previously wrapped around.  <a href="#aab47409d4c4166c0b4ce53bbbc10abec">More...</a><br/></td></tr>
<tr class="separator:aab47409d4c4166c0b4ce53bbbc10abec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f0ea9e0ab67a4b8b7ab6be73e3815d7"><td class="memItemLeft" align="right" valign="top">uintptr_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_halide_runtime_metal_8h.html#a0f0ea9e0ab67a4b8b7ab6be73e3815d7">halide_metal_get_buffer</a> (void *<a class="el" href="printer_8h.html#a9a395374120db0d0280e16f53201d5cf">user_context</a>, struct <a class="el" href="structbuffer__t.html">buffer_t</a> *<a class="el" href="printer_8h.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a>)</td></tr>
<tr class="memdesc:a0f0ea9e0ab67a4b8b7ab6be73e3815d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the underlying MTLBuffer for a <a class="el" href="structbuffer__t.html" title="The raw representation of an image passed around by generated Halide code. ">buffer_t</a>.  <a href="#a0f0ea9e0ab67a4b8b7ab6be73e3815d7">More...</a><br/></td></tr>
<tr class="separator:a0f0ea9e0ab67a4b8b7ab6be73e3815d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc88428e3375ba10a2a211ba765d1793"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_halide_runtime_metal_8h.html#adc88428e3375ba10a2a211ba765d1793">halide_metal_acquire_context</a> (void *<a class="el" href="printer_8h.html#a9a395374120db0d0280e16f53201d5cf">user_context</a>, halide_metal_device *&amp;device_ret, halide_metal_command_queue *&amp;queue_ret, bool create=true)</td></tr>
<tr class="memdesc:adc88428e3375ba10a2a211ba765d1793"><td class="mdescLeft">&#160;</td><td class="mdescRight">This prototype is exported as applications will typically need to replace it to get <a class="el" href="namespace_halide.html" title="Defines methods for manipulating and analyzing boolean expressions. ">Halide</a> filters to execute on the same device and command queue used for other purposes.  <a href="#adc88428e3375ba10a2a211ba765d1793">More...</a><br/></td></tr>
<tr class="separator:adc88428e3375ba10a2a211ba765d1793"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9dacd5f7750ddf41887bb209876a9f1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_halide_runtime_metal_8h.html#ae9dacd5f7750ddf41887bb209876a9f1">halide_metal_release_context</a> (void *<a class="el" href="printer_8h.html#a9a395374120db0d0280e16f53201d5cf">user_context</a>)</td></tr>
<tr class="memdesc:ae9dacd5f7750ddf41887bb209876a9f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">This call balances each successfull halide_metal_acquire_context call.  <a href="#ae9dacd5f7750ddf41887bb209876a9f1">More...</a><br/></td></tr>
<tr class="separator:ae9dacd5f7750ddf41887bb209876a9f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:a4521858d8a01477b467a73fb1b8fb4c8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_halide_runtime_metal_8h.html#a4521858d8a01477b467a73fb1b8fb4c8">halide_metal_initialize_kernels</a> (void *<a class="el" href="printer_8h.html#a9a395374120db0d0280e16f53201d5cf">user_context</a>, void **state_ptr, const char *src, int size)</td></tr>
<tr class="memdesc:a4521858d8a01477b467a73fb1b8fb4c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">These are forward declared here to allow clients to override the <a class="el" href="namespace_halide.html" title="Defines methods for manipulating and analyzing boolean expressions. ">Halide</a> Metal runtime.  <a href="#a4521858d8a01477b467a73fb1b8fb4c8">More...</a><br/></td></tr>
<tr class="separator:a4521858d8a01477b467a73fb1b8fb4c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa62260d5292f83c05c5f89b7e892f4d0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_halide_runtime_metal_8h.html#aa62260d5292f83c05c5f89b7e892f4d0">halide_metal_run</a> (void *<a class="el" href="printer_8h.html#a9a395374120db0d0280e16f53201d5cf">user_context</a>, void *state_ptr, const char *entry_name, int blocksX, int blocksY, int blocksZ, int threadsX, int threadsY, int threadsZ, int shared_mem_bytes, <a class="el" href="runtime__internal_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a> arg_sizes[], void *args[], <a class="el" href="runtime__internal_8h.html#acfd957407fbe865fe77f6fdf86818f5e">int8_t</a> arg_is_buffer[], int num_attributes, float *vertex_buffer, int num_coords_dim0, int num_coords_dim1)</td></tr>
<tr class="memdesc:aa62260d5292f83c05c5f89b7e892f4d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">These are forward declared here to allow clients to override the <a class="el" href="namespace_halide.html" title="Defines methods for manipulating and analyzing boolean expressions. ">Halide</a> Metal runtime.  <a href="#aa62260d5292f83c05c5f89b7e892f4d0">More...</a><br/></td></tr>
<tr class="separator:aa62260d5292f83c05c5f89b7e892f4d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Routines specific to the <a class="el" href="namespace_halide.html" title="Defines methods for manipulating and analyzing boolean expressions. ">Halide</a> Metal runtime. </p>

<p>Definition in file <a class="el" href="_halide_runtime_metal_8h_source.html">HalideRuntimeMetal.h</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a9bbbbcb585e8e3de2c0659cb8f455d82"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="structhalide__device__interface.html">halide_device_interface</a>* halide_metal_device_interface </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a4521858d8a01477b467a73fb1b8fb4c8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int halide_metal_initialize_kernels </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>state_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>These are forward declared here to allow clients to override the <a class="el" href="namespace_halide.html" title="Defines methods for manipulating and analyzing boolean expressions. ">Halide</a> Metal runtime. </p>
<p>Do not call them. </p>

</div>
</div>
<a class="anchor" id="aa62260d5292f83c05c5f89b7e892f4d0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int halide_metal_run </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>state_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>entry_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>blocksX</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>blocksY</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>blocksZ</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>threadsX</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>threadsY</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>threadsZ</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>shared_mem_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="runtime__internal_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>&#160;</td>
          <td class="paramname"><em>arg_sizes</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>args</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="runtime__internal_8h.html#acfd957407fbe865fe77f6fdf86818f5e">int8_t</a>&#160;</td>
          <td class="paramname"><em>arg_is_buffer</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_attributes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>vertex_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_coords_dim0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_coords_dim1</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>These are forward declared here to allow clients to override the <a class="el" href="namespace_halide.html" title="Defines methods for manipulating and analyzing boolean expressions. ">Halide</a> Metal runtime. </p>
<p>Do not call them. </p>

</div>
</div>
<a class="anchor" id="a443e002b0f4f5e5d74ab1c3b981abf62"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int halide_metal_wrap_buffer </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structbuffer__t.html">buffer_t</a> *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uintptr_t&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the underlying MTLBuffer for a <a class="el" href="structbuffer__t.html" title="The raw representation of an image passed around by generated Halide code. ">buffer_t</a>. </p>
<p>This memory should be allocated using newBufferWithLength:options or similar and must have an extent large enough to cover that specified by the <a class="el" href="structbuffer__t.html" title="The raw representation of an image passed around by generated Halide code. ">buffer_t</a> extent fields. The dev field of the <a class="el" href="structbuffer__t.html" title="The raw representation of an image passed around by generated Halide code. ">buffer_t</a> must be NULL when this routine is called. This call can fail due to running out of memory or being passed an invalid buffer. The device and host dirty bits are left unmodified. </p>

</div>
</div>
<a class="anchor" id="aab47409d4c4166c0b4ce53bbbc10abec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uintptr_t halide_metal_detach_buffer </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structbuffer__t.html">buffer_t</a> *&#160;</td>
          <td class="paramname"><em>buf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disconnect a <a class="el" href="structbuffer__t.html" title="The raw representation of an image passed around by generated Halide code. ">buffer_t</a> from the memory it was previously wrapped around. </p>
<p>Should only be called for a <a class="el" href="structbuffer__t.html" title="The raw representation of an image passed around by generated Halide code. ">buffer_t</a> that halide_metal_wrap_buffer was previously called on. Frees any storage associated with the binding of the <a class="el" href="structbuffer__t.html" title="The raw representation of an image passed around by generated Halide code. ">buffer_t</a> and the buffer, but does not free the MTLBuffer. The previously wrapped buffer is returned. The dev field of the <a class="el" href="structbuffer__t.html" title="The raw representation of an image passed around by generated Halide code. ">buffer_t</a> will be NULL on return. </p>

</div>
</div>
<a class="anchor" id="a0f0ea9e0ab67a4b8b7ab6be73e3815d7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uintptr_t halide_metal_get_buffer </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structbuffer__t.html">buffer_t</a> *&#160;</td>
          <td class="paramname"><em>buf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the underlying MTLBuffer for a <a class="el" href="structbuffer__t.html" title="The raw representation of an image passed around by generated Halide code. ">buffer_t</a>. </p>
<p>This buffer must be valid on an Metal device, or not have any associated device memory. If there is no device memory (dev field is NULL), this returns 0. </p>

</div>
</div>
<a class="anchor" id="adc88428e3375ba10a2a211ba765d1793"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int halide_metal_acquire_context </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">halide_metal_device *&amp;&#160;</td>
          <td class="paramname"><em>device_ret</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">halide_metal_command_queue *&amp;&#160;</td>
          <td class="paramname"><em>queue_ret</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>create</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This prototype is exported as applications will typically need to replace it to get <a class="el" href="namespace_halide.html" title="Defines methods for manipulating and analyzing boolean expressions. ">Halide</a> filters to execute on the same device and command queue used for other purposes. </p>
<p>The halide_metal_device is an id &lt;MTLDevice&gt; and halide_metal_command_queue is an id &lt;MTLCommandQueue&gt;. No reference counting is done by <a class="el" href="namespace_halide.html" title="Defines methods for manipulating and analyzing boolean expressions. ">Halide</a> on these objects. They must remain valid until all off the following are true:</p>
<ul>
<li>A balancing halide_metal_release_context has occurred for each halide_metal_acquire_context which returned the device/queue</li>
<li>All <a class="el" href="namespace_halide.html" title="Defines methods for manipulating and analyzing boolean expressions. ">Halide</a> filters using the context information have completed</li>
<li>All <a class="el" href="structbuffer__t.html" title="The raw representation of an image passed around by generated Halide code. ">buffer_t</a> objects on the device have had halide_device_free called or have been detached via halide_metal_detach_buffer.</li>
<li>halide_device_release has been called on the interface returned from <a class="el" href="_halide_runtime_metal_8h.html#a9bbbbcb585e8e3de2c0659cb8f455d82">halide_metal_device_interface()</a>. (This releases the programs on the context.) </li>
</ul>

</div>
</div>
<a class="anchor" id="ae9dacd5f7750ddf41887bb209876a9f1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int halide_metal_release_context </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This call balances each successfull halide_metal_acquire_context call. </p>
<p>If halide_metal_acquire_context is replaced, this routine must be replaced as well. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_de4960fb9afd4052b9300248cfe3cde2.html">src</a></li><li class="navelem"><a class="el" href="dir_ef3d5508a3fd4f5240038b8e3420e3ab.html">runtime</a></li><li class="navelem"><a class="el" href="_halide_runtime_metal_8h.html">HalideRuntimeMetal.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
